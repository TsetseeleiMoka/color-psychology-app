# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1LObEPL3P1uGzy6c5HoIzMUX6okxKbfKZ
"""

import streamlit as st
import json
import re

st.set_page_config(page_title="ðŸŽ¨ Colour Psychology Explorer", layout="centered")

# --- Load your JSON file with color data ---
# Assuming you have a file called 'color_data.json' in the same directory
# that looks like:
# {
#   "red": {"Marketing": "...", "Interior Design": "...", "Psychology": "..."},
#   "yellow": {...},
#   ...
# }
@st.cache_data
def load_color_data():
    with open("color_data.json", "r", encoding="utf-8") as f:
        return json.load(f)

color_data = load_color_data()

# --- Helper function to validate hex code ---
def is_valid_hex(hex_code):
    return bool(re.fullmatch(r"#([A-Fa-f0-9]{6})", hex_code.strip()))

# --- Mapping common hex colors to names ---
hex_to_name = {
    '#FF0000': 'red',
    '#FFA500': 'orange',
    '#FF00FF': 'magenta',
    '#000000': 'black',
    '#4B0082': 'indigo',
    '#800080': 'purple',
    '#FFD700': 'gold',
    '#FFC0CB': 'pink',
    '#A52A2A': 'brown',
    '#0000FF': 'blue',
    '#C0C0C0': 'silver',
    '#FFFF00': 'yellow',
    '#008000': 'green',
    '#40E0D0': 'turquoise',
    '#FFFFFF': 'white',
    '#808080': 'grey'
}

# --- Streamlit UI ---
st.title("ðŸŽ¨ Colour Psychology Explorer")
st.write("Enter a hex colour code or pick a colour below to explore its psychology and uses.")

col1, col2 = st.columns([2,1])

with col1:
    user_input = st.text_input("Enter Hex Color Code (e.g. #FF0000)", value="#FF0000")

with col2:
    # If user_input is valid hex, use that; else use a default
    default_color = user_input if is_valid_hex(user_input) else "#FF0000"
    color_picker = st.color_picker("Pick a Color", value=default_color)

# Determine which color to use
selected_color = user_input.strip() if is_valid_hex(user_input) else color_picker

# Show the color swatch preview
st.markdown("---")
st.markdown("### Color Preview")
st.markdown(
    f'<div style="width:100px; height:100px; background-color:{selected_color}; border:1px solid #ddd;"></div>',
    unsafe_allow_html=True
)

# Map selected_color to color name (hex_to_name keys are uppercase)
selected_color_upper = selected_color.upper()
color_name = hex_to_name.get(selected_color_upper)

if color_name and color_name in color_data:
    st.markdown(f"## Insights for **{color_name.title()}**")

    st.markdown("### Marketing")
    st.write(color_data[color_name].get("Marketing", "wip"))

    st.markdown("### Interior Design")
    st.write(color_data[color_name].get("Interior Design", "wip"))

    st.markdown("### Psychology")
    st.write(color_data[color_name].get("Psychology", "wip"))
else:
    st.info("Pick a valid colour from the picker or enter a valid hex code like #FF0000 to see insights!")

# --- Footer ---
st.markdown("---")
st.caption("Made with ðŸ’™ by Moka")